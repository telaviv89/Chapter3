{"ts":1344806922024,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"style\n    #hiddenCanvas {display: none}\n    #displayCanvas {\n        background-image: url(../../examples/photo.jpg);  \n        background-repeat: no-repeat; \n        background-position: left -20px;\n    }\n.container\n    header#overview.jumbotron\n        h1 HTML5 Video with chroma-key\n\n    .row\n        .span5\n            video#sourceVideo(src='/examples/mdy.m4v', width='320', height='192', controls='true')\n            canvas#hiddenCanvas(width='640', height='386')\n        .span5\n            canvas#displayCanvas(width='640', height='386')\n\nscript(type='text/javascript')\n    var sourceVideo = document.getElementById(\"sourceVideo\");\n    var hiddenCanvas = document.getElementById(\"hiddenCanvas\");\n    var displayCanvas = document.getElementById(\"displayCanvas\");\n    var hiddenContext = hiddenCanvas.getContext (\"2d\");\n    var displayContext = displayCanvas.getContext (\"2d\");\n\n\n\n\n\n    sourceVideo.addEventListener('play', function(){runAnalysis();});\n\n    var runAnalysis = function(){\n         if(sourceVideo.paused || sourceVideo.ended){\n          return\n        }\n        frameConversion();\n        setTimeout(function() {\n                runAnalysis();\n            }, 0);\n         };\n\n        var frameConversion = function(){\n        \n        hiddenContext.drawImage(sourceVideo,0,0,sourceVideo.videoWidth, sourceVideo.videoHeight);\n        \n        var frame = hiddenContext.getImageData(0,0,sourceVideo.videoWidth, sourceVideo.videoHeight);\n        \n        var length = frame.data.length;\n        for (var i =0; i <length; i++){\n            var r = frame.data [i * 4 + 0];\n        var g = frame.data [i * 4 + 1];\n        var b = frame.data [i * 4 + 2];\n        \n        if(g > 110 && g < 200 && r < 190 && r > 100 && b < 200 && b > 110){  \n        frame.data[i * 4 + 3] = 0; \n        } \n            }\n        displayContext.putImageData(frame, 0, 0);\n        return\n        };\n\n\n"]],"start1":0,"start2":0,"length1":0,"length2":1893}]],"length":1893}
